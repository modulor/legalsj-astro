---
import Layout from "../layouts/Layout.astro";
import Title from "../components/Title.astro";
import PageContent from "../components/PageContent.astro";
---

<Layout>
  <Title title={"Contacto"} />
  <PageContent>
    <div class="row">
      <div class="col-lg-8 offset-lg-2">
        <div class="row">
          <div class="col-lg-6 mb-4 mb-lg-0">
            <div id="form-mensaje" class="alert alert-success d-none" role="alert">¡Gracias! Tu mensaje ha sido enviado.</div>
            <form action="https://formspree.io/f/xzzrrael" method="POST" class="p-4 border rounded bg-light shadow-sm">
              <div class="mb-3">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" name="nombre" id="nombre" class="form-control" placeholder="Tu nombre" required />
              </div>

              <div class="mb-3">
                <label for="email" class="form-label">Correo electrónico</label>
                <input type="email" name="email" id="email" class="form-control" placeholder="Tu correo" required />
              </div>

              <div class="mb-3">
                <label for="mensaje" class="form-label">Mensaje</label>
                <textarea name="mensaje" id="mensaje" class="form-control" rows="5" placeholder="Escribe tu mensaje" required></textarea>
              </div>

              <button type="submit" class="btn btn-primary">Enviar</button>
            </form>
          </div>
          <div class="col-lg-6">
            <div class="mb-4">
              <h4>Dirección</h4>
              <p>Av. Ejercito Nacional 425 Piso 4 Int. 403-F, Col. Granada, Alcaldía Miguel Hidalgo, C.P. 11520, Ciudad de México.</p>
              <a href="https://maps.app.goo.gl/nY8CeQKyrdV6JsoXA" target="_blank" class="btn btn-primary">
                <i class="fas fa-map-marker-alt"></i> VER UBICACIÓN
              </a>
            </div>
            <div class="mb-4">
              <h4>Correo Electrónico</h4>
              <a href="mailto:contacto@legalsj.com" target="_blank" class="btn btn-primary">
                <i class="fas fa-envelope"></i> contacto@legalsj.com
              </a>
            </div>
            <div class="mb-4">
              <h4>Teléfono</h4>
              <a href="https://wa.me/+5215540063684" class="btn btn-success" target="_blank">
                <i class="fa-brands fa-whatsapp"></i> 55 6651 2707
              </a>
            </div>
            <div class="mb-4">
              <h4>Redes Sociales</h4>
              <div class="mb-2">
                <a href="https://www.facebook.com/share/16za6LsGqk/" target="_blank" class="btn btn-primary me-2">
                  <i class="fab fa-facebook-f"></i> Facebook
                </a>
              </div>
              <div class="mb-2">
                <a href="https://www.linkedin.com/in/legal-servicios-jurídicos-38684b384/" target="_blank" class="btn btn-primary">
                  <i class="fab fa-linkedin-in"></i> LinkedIn
                </a>
              </div>
              <div class="mb-2">
                <a href="https://www.instagram.com/legalsj78?igsh=MWZqcmhoMDlwaTFjcA==" target="_blank" class="btn btn-primary">
                  <i class="fab fa-instagram"></i> Instagram
                </a>
              </div>
            </div>
            <div class="mb-4">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3762.402992973133!2d-99.19052292467504!3d19.438184381842408!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d1f97aa0327d83%3A0xf0c3e87b65071cb8!2sEj%C3%A9rcito%20Nacional%20425!5e0!3m2!1ses!2smx!4v1762549408792!5m2!1ses!2smx"
                width="100%"
                height="350"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
          </div>
        </div>
      </div>
    </div>
  </PageContent>
</Layout>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
    const mensaje = document.getElementById("form-mensaje");

    if (form) {
      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        const submitBtn = form.querySelector('button[type="submit"]') as HTMLButtonElement;

        if (submitBtn) {
          submitBtn.disabled = true;
          submitBtn.textContent = "Enviando...";

          const data = new FormData(form);
          const response = await fetch(form.action, {
            method: "POST",
            body: data,
            headers: { Accept: "application/json" },
          });

          if (response.ok) {
            form.reset();

            if (mensaje) {
              mensaje.classList.remove("d-none");
            }
          }

          submitBtn.disabled = false;
          submitBtn.textContent = "Enviar";
        }
      });
    }
  });
</script>
